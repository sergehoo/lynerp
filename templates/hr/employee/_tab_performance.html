{# Lyneerp/hr/templates/hr/employee/_tab_performance.html #}
<div x-show="activeTab==='performance'" x-cloak class="space-y-4">
  <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3">
    <div>
      <div class="text-sm font-semibold text-slate-900 dark:text-white">Performance</div>
      <div class="text-xs text-slate-500">Toutes les évaluations (paginé)</div>
    </div>
    <form method="get" class="flex gap-2">
      <input type="hidden" name="tab" value="performance">
      <input name="q_perf" value="{{ q_perf }}" placeholder="Commentaire / reviewer…"
             class="w-72 max-w-full px-3 py-2 rounded-full border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm"/>
      <button class="px-4 py-2 rounded-full bg-slate-900 text-white text-sm font-semibold">Filtrer</button>
    </form>
  </div>

  <div class="space-y-3">
    {% for r in performance_reviews_page %}
      <div class="rounded-3xl border border-slate-100 dark:border-slate-800 p-5 bg-white dark:bg-slate-900">
        <div class="flex items-center justify-between">
          <div class="text-sm font-semibold text-slate-900 dark:text-white">
            {{ r.reviewer.get_full_name|default:r.reviewer }}
          </div>
          <div class="text-xs text-slate-500">{{ r.review_date|date:"d/m/Y" }}</div>
        </div>
        <div class="mt-2 text-sm text-slate-700 dark:text-slate-200">
          Note : <span class="font-semibold">{{ r.performance_rating }}/5</span>
        </div>
        <div class="mt-2 text-xs text-slate-600 dark:text-slate-300">{{ r.comments|default:"—" }}</div>
      </div>
    {% empty %}
      <div class="text-center py-10 text-slate-500 text-sm">Aucune évaluation.</div>
    {% endfor %}
  </div>

  {% include "hr/partials/_pager.html" with page=performance_reviews_page tab="performance" page_param="perf" extra_qs="q_perf="|add:q_perf %}
</div>